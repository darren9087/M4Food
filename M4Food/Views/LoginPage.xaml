<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="M4Food.Views.LoginPage"
             Shell.NavBarIsVisible="False">

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FAF7F0" Offset="0.0" />
            <GradientStop Color="#F0EAD6" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <Grid RowDefinitions="*,Auto,*" Padding="30">

        <VerticalStackLayout Grid.Row="1" 
                             Spacing="30"
                             VerticalOptions="Center">

            <Border x:Name="LogoBorder"
                    BackgroundColor="White"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 20"
                    Padding="50,30"
                    HorizontalOptions="Center"
                    Opacity="0"
                    TranslationY="30">
                <Border.Shadow>
                    <Shadow Brush="#E8C547" Opacity="0.3" Radius="30" Offset="0,8" />
                </Border.Shadow>
                <Label FontSize="42"
                       FontAttributes="Bold"
                       HorizontalOptions="Center">
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="M4" TextColor="#2C2416" FontAttributes="Bold"/>
                            <Span Text="FO" TextColor="#E8C547" FontAttributes="Bold"/>
                            <Span Text="OD" TextColor="#2C2416" FontAttributes="Bold"/>
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </Border>

            <VerticalStackLayout x:Name="WelcomeText"
                                 Spacing="12" 
                                 HorizontalOptions="Center"
                                 Opacity="0"
                                 TranslationY="30">
                <Label Text="Welcome to M4Food"
                       FontSize="28"
                       FontAttributes="Bold"
                       TextColor="#2C2416"
                       HorizontalTextAlignment="Center"/>
                <Label Text="Your Solution for Food Donation!"
                       FontSize="16"
                       TextColor="#8B7355"
                       HorizontalTextAlignment="Center"
                       Opacity="0.9"/>
            </VerticalStackLayout>

            <VerticalStackLayout x:Name="LoginForm" 
                                 Spacing="15" 
                                 Margin="0,20,0,0"
                                 Opacity="0"
                                 TranslationY="30">

                <Border StrokeThickness="1"
                        Stroke="#E5DDD5"
                        BackgroundColor="White"
                        StrokeShape="RoundRectangle 25"
                        HeightRequest="50"
                        Padding="15,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.08" Radius="15" Offset="0,4" />
                    </Border.Shadow>
                    <Grid ColumnDefinitions="Auto, *">
                        <Path Fill="#A89484"
                              Aspect="Uniform"
                              WidthRequest="20"
                              Data="M20,8l-8,5-8-5V6l8,5,8-5m0-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V6C22,4.9,21.1,4,20,4z" />
                        <Entry Grid.Column="1"
                               Placeholder="Email or Username"
                               PlaceholderColor="#A89484"
                               TextColor="#2C2416"
                               FontSize="16"
                               Keyboard="Email"
                               VerticalOptions="Center"
                               Margin="10,0,0,0"
                               AutomationId="emailEntry"/>
                    </Grid>
                </Border>

                <Border StrokeThickness="1"
                        Stroke="#E5DDD5"
                        BackgroundColor="White"
                        StrokeShape="RoundRectangle 25"
                        HeightRequest="50"
                        Padding="15,0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.08" Radius="15" Offset="0,4" />
                    </Border.Shadow>
                    <Grid ColumnDefinitions="Auto, *">
                        <Path Fill="#A89484"
                              Aspect="Uniform"
                              WidthRequest="20"
                              Data="M12,17c1.1,0,2-0.9,2-2s-0.9-2-2-2s-2,0.9-2,2S10.9,17,12,17z M18,8h-1V6c0-2.8-2.2-5-5-5S7,3.2,7,6v2H6c-1.1,0-2,0.9-2,2v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10C20,8.9,19.1,8,18,8z M9,6c0-1.7,1.3-3,3-3s3,1.3,3,3v2H9V6z" />
                        <Entry Grid.Column="1"
                               Placeholder="Password"
                               PlaceholderColor="#A89484"
                               TextColor="#2C2416"
                               FontSize="16"
                               IsPassword="True"
                               VerticalOptions="Center"
                               Margin="10,0,0,0"
                               AutomationId="passwordEntry"/>
                    </Grid>
                </Border>

                <Button Text="Login"
                        BackgroundColor="#E8C547"
                        TextColor="White"
                        FontAttributes="Bold"
                        FontSize="18"
                        CornerRadius="25"
                        HeightRequest="50"
                        Margin="0,10,0,0"
                        Clicked="OnLoginClicked"/>

                <Label Text="Forgot Password?"
                       TextColor="#C67B5C"
                       HorizontalOptions="Center"
                       Margin="0,5,0,0"
                       TextDecorations="Underline">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnForgotPasswordTapped"/>
                    </Label.GestureRecognizers>
                </Label>
            </VerticalStackLayout>

            <Grid x:Name="Separator"
                  ColumnDefinitions="*,Auto,*" 
                  Margin="0,10,0,10"
                  Opacity="0"
                  TranslationY="30">
                <BoxView Grid.Column="0"
                         BackgroundColor="#E8C547"
                         HeightRequest="1"
                         VerticalOptions="Center"
                         CornerRadius="1"
                         Opacity="0.6"/>
                <Label Grid.Column="1"
                       Text="OR"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="#8B7355"
                       Opacity="0.6"
                       Margin="15,0"/>
                <BoxView Grid.Column="2"
                         BackgroundColor="#E8C547"
                         HeightRequest="1"
                         VerticalOptions="Center"
                         CornerRadius="1"
                         Opacity="0.6"/>
            </Grid>

            <VerticalStackLayout x:Name="GoogleButton"
                                 Spacing="15" 
                                 HorizontalOptions="Center"
                                 Opacity="0"
                                 TranslationY="30">
                <Label Text="Sign in with Google"
                       FontSize="14"
                       TextColor="#A89484"
                       HorizontalTextAlignment="Center"
                       Opacity="0.8"/>

                <Border BackgroundColor="White"
                        StrokeThickness="2"
                        Stroke="#E5DDD5"
                        StrokeShape="RoundRectangle 40"
                        WidthRequest="80"
                        HeightRequest="80"
                        HorizontalOptions="Center">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.15" Radius="20" Offset="0,4" />
                    </Border.Shadow>
                    <Grid>
                        <Image Source="google_icon.jpg"
                               WidthRequest="40"
                               HeightRequest="40"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnGoogleSignInTapped"/>
                        </Grid.GestureRecognizers>
                    </Grid>
                </Border>
            </VerticalStackLayout>

        </VerticalStackLayout>

        <VerticalStackLayout Grid.Row="2"
                             x:Name="Footer"
                             Spacing="15"
                             VerticalOptions="End"
                             HorizontalOptions="Center"
                             Margin="0,0,0,20"
                             Opacity="0"
                             TranslationY="30">

            <Label HorizontalTextAlignment="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Don't have an account? " 
                              FontSize="14" 
                              TextColor="#A89484"/>
                        <Span Text="Sign Up" 
                              FontSize="14" 
                              TextColor="#C67B5C"
                              FontAttributes="Bold"
                              TextDecorations="Underline">
                            <Span.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnSignUpTapped"/>
                            </Span.GestureRecognizers>
                        </Span>
                    </FormattedString>
                </Label.FormattedText>
            </Label>

            <Label LineBreakMode="WordWrap"
                   HorizontalTextAlignment="Center">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="By signing in, you agree to our " 
                              FontSize="11" 
                              TextColor="#A89484"/>
                        <Span Text="Terms" 
                              FontSize="11" 
                              TextColor="#C67B5C"
                              TextDecorations="Underline"/>
                        <Span Text=" and " 
                              FontSize="11" 
                              TextColor="#A89484"/>
                        <Span Text="Privacy Policy" 
                              FontSize="11" 
                              TextColor="#C67B5C"
                              TextDecorations="Underline"/>
                    </FormattedString>
                </Label.FormattedText>
            </Label>
        </VerticalStackLayout>

    </Grid>

</ContentPage>